{% set currentRoute = app.request.attributes.get('_route') %}

{# Sidebar menu configuration #}
{% set sidebar = [
    {
        title: 'Categories',
        icon: 'fas fa-fw fa-cog',
        id: 'categoriesNavBox',
        role: "ROLE_STAFF",
        routes: ['app_category_new', 'app_category_index'],
        items: [
            { label: 'Add New Category', route: 'app_category_new' },
            { label: 'Category List',   route: 'app_category_index' }
        ]
    },
    {
        title: 'Business',
        icon: 'fas fa-fw fa-cog',
        id: 'businessNavBox',
        role: "ROLE_STAFF",
        routes: ['app_business_index', 'app_business_new'],
        items: [
            { label: 'Show All Business', route: 'app_business_index' },
            { label: 'Add New Business',  route: 'app_business_new' }
        ]
    },
	{
        title: 'Appointments',
        icon: 'fas fa-fw fa-cog',
        id: 'appointmentNavBox',
        role: "ROLE_STAFF",
        routes: ['app_appointment_new', 'app_appointment_index'],
        items: [
            { label: 'Add New Appointment', route: 'app_appointment_new' },
            { label: 'Appointment List',   route: 'app_appointment_index' }
        ]
    },
	
] %}
 {# {
        title: 'Appointments Slot',
        icon: 'fas fa-fw fa-cog',
        id: 'slotNavBox',
        role: "ROLE_STAFF",
        routes: ['app_appointment_slot_new', 'app_appointment_slot_index'],
        items: [
            { label: 'Add New Appointment', route: 'app_appointment_slot_new' },
            { label: 'Appointment List',   route: 'app_appointment_slot_index' }
        ]
    } #}


	<ul
		class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

		<!-- Sidebar - Brand -->
		<a class="sidebar-brand d-flex align-items-center justify-content-center mt-3" href="{{ path ('business_dashboard') }}">
			<div class="sidebar-brand-text mx-3">Appointo
				<div><small>Business Admin Area</small></div>
			</div>
		</a>

		<!-- Divider -->
		<hr
		class="sidebar-divider my-0">

		<!-- Nav Item - Dashboard -->
		<li class="nav-item active">
			<a class="nav-link" href="{{ path ('business_dashboard') }}">
				<i class="fas fa-fw fa-tachometer-alt"></i>
				<span>Dashboard</span>
			</a>
		</li>
		<!-- Divider -->
		 {% for menu in sidebar %}
         {# {% if is_granted(menu.role) %} #}
        <li class="nav-item">

            <a class="nav-link collapsed"
               href="#"
               data-toggle="collapse"
               data-target="#{{ menu.id }}">
                <i class="{{ menu.icon }}"></i>
                <span>{{ menu.title }}</span>
            </a>

            <div id="{{ menu.id }}"
                 class="collapse {{ currentRoute in menu.routes ? 'show' : '' }}"
                 data-parent="#accordionSidebar">

                <div class="bg-white py-2 collapse-inner rounded">
                    {% for item in menu.items %}
                        <a class="collapse-item {{ currentRoute == item.route ? 'active' : '' }}"
                           href="{{ path(item.route) }}">
                           {{ item.label }}
                        </a>
                    {% endfor %}
                </div>

            </div>
        </li>
        {# {% endif %} #}
    {% endfor %}
		

	</ul>

